{"version":3,"file":"hub-center-hub-service-api-user.mjs","sources":["../../../../../libs/hub-service/api-user/src/lib/api-user.service.ts","../../../../../libs/hub-service/api-user/src/hub-center-hub-service-api-user.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { BehaviorSubject, Observable, map } from 'rxjs';\nimport { ILoginReq, Environment } from '@hub-center/hub-model';\nimport {\n  LocalStorageService,\n  LocalStoreEnum,\n} from '@hub-center/hub-service/storage';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ApiUserService {\n  public currentUserSubject: BehaviorSubject<unknown>;\n  public currentUser: Observable<unknown>;\n  hubBackendApiEndpoint: string;\n\n  constructor(\n    private http: HttpClient,\n    private environment: Environment,\n    private localStorageService: LocalStorageService\n  ) {\n    this.hubBackendApiEndpoint = this.environment.hubBackendApiEndpoint;\n    this.currentUserSubject = new BehaviorSubject<unknown>(\n      JSON.parse(this.localStorageService.getItem(LocalStoreEnum.CUSTOMER_KEY)!)\n    );\n    this.currentUser = this.currentUserSubject.asObservable();\n  }\n\n  public get currentUserValue(): unknown {\n    return this.currentUserSubject.value;\n  }\n\n  login(user: ILoginReq) {\n    return this.http.post(this.hubBackendApiEndpoint + `auth/login`, user).pipe(\n      map((res: any) => {\n        if (res) {\n          localStorage.setItem(\n            LocalStoreEnum.CUSTOMER_KEY,\n            JSON.stringify(res.data.user)\n          );\n\n          localStorage.setItem(\n            LocalStoreEnum.ACCESS_TOKEN,\n            res.data.accessToken\n          );\n        }\n\n        this.currentUserSubject.next(user);\n\n        return user;\n      })\n    );\n  }\n\n  getListDevice() {\n    return this.http.get(this.hubBackendApiEndpoint + `device/get-list`);\n  }\n\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;;;;;;AAAA;MAaa,cAAc,CAAA;AAKzB,IAAA,WAAA,CACU,IAAgB,EAChB,WAAwB,EACxB,mBAAwC,EAAA;QAFxC,IAAI,CAAA,IAAA,GAAJ,IAAI,CAAY;QAChB,IAAW,CAAA,WAAA,GAAX,WAAW,CAAa;QACxB,IAAmB,CAAA,mBAAA,GAAnB,mBAAmB,CAAqB;QAEhD,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,WAAW,CAAC,qBAAqB,CAAC;QACpE,IAAI,CAAC,kBAAkB,GAAG,IAAI,eAAe,CAC3C,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,cAAc,CAAC,YAAY,CAAE,CAAC,CAC3E,CAAC;QACF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,kBAAkB,CAAC,YAAY,EAAE,CAAC;KAC3D;AAED,IAAA,IAAW,gBAAgB,GAAA;AACzB,QAAA,OAAO,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC;KACtC;AAED,IAAA,KAAK,CAAC,IAAe,EAAA;QACnB,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,qBAAqB,GAAG,CAAA,UAAA,CAAY,EAAE,IAAI,CAAC,CAAC,IAAI,CACzE,GAAG,CAAC,CAAC,GAAQ,KAAI;AACf,YAAA,IAAI,GAAG,EAAE;AACP,gBAAA,YAAY,CAAC,OAAO,CAClB,cAAc,CAAC,YAAY,EAC3B,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAC9B,CAAC;AAEF,gBAAA,YAAY,CAAC,OAAO,CAClB,cAAc,CAAC,YAAY,EAC3B,GAAG,CAAC,IAAI,CAAC,WAAW,CACrB,CAAC;AACH,aAAA;AAED,YAAA,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAEnC,YAAA,OAAO,IAAI,CAAC;SACb,CAAC,CACH,CAAC;KACH;IAED,aAAa,GAAA;AACX,QAAA,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,qBAAqB,GAAG,CAAiB,eAAA,CAAA,CAAC,CAAC;KACtE;+EA7CU,cAAc,EAAA,EAAA,CAAA,QAAA,CAAA,EAAA,CAAA,UAAA,CAAA,EAAA,EAAA,CAAA,QAAA,CAAA,EAAA,CAAA,WAAA,CAAA,EAAA,EAAA,CAAA,QAAA,CAAA,EAAA,CAAA,mBAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA;uEAAd,cAAc,EAAA,OAAA,EAAd,cAAc,CAAA,IAAA,EAAA,UAAA,EAFb,MAAM,EAAA,CAAA,CAAA,EAAA;;uFAEP,cAAc,EAAA,CAAA;cAH1B,UAAU;AAAC,QAAA,IAAA,EAAA,CAAA;AACV,gBAAA,UAAU,EAAE,MAAM;AACnB,aAAA,CAAA;;;ACZD;;AAEG;;;;"}