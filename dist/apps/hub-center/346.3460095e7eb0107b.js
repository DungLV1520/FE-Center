"use strict";(self.webpackChunkhub_center=self.webpackChunkhub_center||[]).push([[346],{1346:(fe,f,l)=>{l.r(f),l.d(f,{ListDeviceComponent:()=>ve});var d=l(6814),C=l(2840),T=l(551),u=l(824),h=l(2787),F=l(2851),g=l(9691),a=l(6223),k=l(2962),z=l(3217),I=l(3599),x=l(2612),D=l(804),U=l(1490),M=l(2078),O=l(2274),p=l(9663),Z=l(5695),L=l(6819);const J=[{title:"STT",priority:0,listOfFilter:[],filterFn:null,filterMultiple:!0},{title:"T\xean thi\u1ebft b\u1ecb",priority:1,listOfFilter:[],filterFn:null,filterMultiple:!0},{title:"Tr\u1ea1ng th\xe1i",priority:2,listOfFilter:[],filterFn:null,filterMultiple:!0},{title:"Tr\xecnh chi\u1ebfu",priority:3,listOfFilter:[],filterFn:null,filterMultiple:!0},{title:"\u0110ang ch\u1ea1y",priority:4,listOfFilter:[],filterFn:null,filterMultiple:!0},{title:"M\u1ea5t k\u1ebft n\u1ed1i",priority:5,listOfFilter:[],filterFn:null,filterMultiple:!0},{title:"Ho\u1ea1t \u0111\u1ed9ng g\u1ea7n nh\u1ea5t",priority:6,listOfFilter:[],filterFn:null,filterMultiple:!0},{title:"V\u1ecb tr\xed",priority:7,listOfFilter:[],filterFn:null,filterMultiple:!0},{title:"Model m\xe1y",priority:8,listOfFilter:[],filterFn:null,filterMultiple:!0},{title:"S\u1ed1 series",priority:9,listOfFilter:[],filterFn:null,filterMultiple:!0},{title:"H\xe3ng s\u1ea3n xu\u1ea5t",priority:10,listOfFilter:[],filterFn:null,filterMultiple:!0},{title:"Phi\xean b\u1ea3n app \u0111ang c\xe0i \u0111\u1eb7t",priority:11,listOfFilter:[],filterFn:null,filterMultiple:!0},{title:"Phi\xean b\u1ea3n h\u1ec7 \u0111i\u1ec1u h\xe0nh",priority:10,listOfFilter:[],filterFn:null,filterMultiple:!0},{title:"",priority:11,listOfFilter:[],filterFn:null,filterMultiple:!0}];var b=l(7417),N=l(5619),S=l(3620),_=l(4716),B=l(2096),P=l(9397),A=l(6306),y=l(8504),e=l(5879);let q=(()=>{class o{constructor(){this.inputData=""}getData(){return this.inputData}static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["adv-rename-modal"]],standalone:!0,features:[e.jDz],decls:1,vars:1,consts:[["type","text","nz-input","","placeholder","Nh\u1eadp t\xean m\u1edbi",3,"ngModel","ngModelChange"]],template:function(n,i){1&n&&(e.TgZ(0,"input",0),e.NdJ("ngModelChange",function(s){return i.inputData=s}),e.qZA()),2&n&&e.Q6J("ngModel",i.inputData)},dependencies:[a.u5,a.Fj,a.JJ,a.On,u.o7,u.Zp],encapsulation:2})}return o})();var v=l(3517);function Q(o,r){if(1&o&&(e.ynx(0),e._UZ(1,"nz-option",2),e.BQk()),2&o){const t=r.$implicit;e.xp6(1),e.s9C("nzValue",t.id),e.s9C("nzLabel",t.name)}}let V=(()=>{class o{constructor(t){this.apiUserService=t,this.inputData=""}ngOnInit(){this.getListRegion()}getData(){return this.inputData}getListRegion(){this.apiUserService.getListRegion().subscribe(t=>{this.region=t?.data?.reduce((n,i)=>(i.subs?n.push(...i.subs):n.push(i),n),[])})}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(v._))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["adv-move-file-modal"]],standalone:!0,features:[e.jDz],decls:2,vars:2,consts:[["nzPlaceHolder","Chon khu v\u1ef1c",1,"w-100",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"]],template:function(n,i){1&n&&(e.TgZ(0,"nz-select",0),e.NdJ("ngModelChange",function(s){return i.inputData=s}),e.YNc(1,Q,2,2,"ng-container",1),e.qZA()),2&n&&(e.Q6J("ngModel",i.inputData),e.xp6(1),e.Q6J("ngForOf",i.region))},dependencies:[a.u5,a.JJ,a.On,u.o7,g.LV,g.Ip,g.Vq,d.ax],encapsulation:2})}return o})();function $(o,r){if(1&o&&e._UZ(0,"nz-option",6),2&o){const t=e.oxw().$implicit;e.s9C("nzValue",t.id),e.Q6J("nzLabel","Thi\u1ebft b\u1ecb ")}}function j(o,r){if(1&o&&(e.ynx(0),e.YNc(1,$,1,2,"nz-option",5),e.BQk()),2&o){const t=r.index;e.xp6(1),e.Q6J("ngIf",0===t)}}let R=(()=>{class o{constructor(t){this.apiUserService=t,this.regionName="",this.regionPositionSave=""}ngOnInit(){this.getListRegion()}getRegionName(){return this.regionName}getRegionPositionSave(){return this.regionPositionSave}getListRegion(){this.apiUserService.getListRegion().subscribe(t=>{this.regions=t.data,this.regions=[{id:null,name:"Thi\u1ebft b\u1ecb",parentId:null,subs:null},...this.regions]})}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(v._))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["adv-add-region"]],standalone:!0,features:[e.jDz],decls:7,vars:3,consts:[[1,"mb-2"],["type","text","nz-input","","placeholder","Nh\u1eadp t\xean khu v\u1ef1c",3,"ngModel","ngModelChange"],[1,"mt-4","mb-2"],["nzPlaceHolder","Ch\u1ecdn v\u1ecb tr\xed l\u01b0u",1,"w-100",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"nzValue","nzLabel",4,"ngIf"],[3,"nzValue","nzLabel"]],template:function(n,i){1&n&&(e.TgZ(0,"label",0),e._uU(1,"T\xean khu v\u1ef1c"),e.qZA(),e.TgZ(2,"input",1),e.NdJ("ngModelChange",function(s){return i.regionName=s}),e.qZA(),e.TgZ(3,"label",2),e._uU(4,"V\u1ecb tr\xed l\u01b0u"),e.qZA(),e.TgZ(5,"nz-select",3),e.NdJ("ngModelChange",function(s){return i.regionPositionSave=s}),e.YNc(6,j,2,1,"ng-container",4),e.qZA()),2&n&&(e.xp6(2),e.Q6J("ngModel",i.regionName),e.xp6(3),e.Q6J("ngModel",i.regionPositionSave),e.xp6(1),e.Q6J("ngForOf",i.regions))},dependencies:[a.u5,a.Fj,a.JJ,a.On,u.o7,u.Zp,g.LV,g.Ip,g.Vq,d.ax,d.O5],encapsulation:2})}return o})();var K=l(7099),E=l(768),Y=l(855),H=l(1958),w=l(2987),G=l(8989);function X(o,r){1&o&&e._UZ(0,"span",19)}function W(o,r){1&o&&(e.ynx(0),e._UZ(1,"span",20),e.TgZ(2,"span"),e._uU(3,"Ch\u1ebf \u0111\u1ed9 xem: b\u1ea3ng"),e.qZA(),e.BQk())}function ee(o,r){1&o&&(e.ynx(0),e._UZ(1,"span",21),e.TgZ(2,"span"),e._uU(3,"Ch\u1ebf \u0111\u1ed9 xem: l\u01b0\u1edbi"),e.qZA(),e.BQk())}function te(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"nz-tag")(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"div",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.resetCheck())}),e.TgZ(4,"span",25),e.O4$(),e.TgZ(5,"svg",26),e._UZ(6,"path",27),e.qZA()()()()}if(2&o){const t=e.oxw(2);e.xp6(2),e.hij("\u0110\xe3 ch\u1ecdn ",null==t.checkedId?null:t.checkedId.length,"")}}function ne(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div"),e.YNc(1,te,7,1,"nz-tag",9),e.TgZ(2,"button",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.checkAll())}),e.TgZ(3,"span"),e._uU(4,"Ch\u1ecdn t\u1ea5t c\u1ea3"),e.qZA()(),e.TgZ(5,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.moveFile())}),e.TgZ(6,"span"),e._uU(7,"Di chuy\u1ec3n"),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.allDevices.length>0),e.xp6(1),e.Q6J("disabled",0===t.allDevices.length),e.xp6(3),e.Q6J("disabled",0===t.checkedId.length)}}const ie=function(o){return{width:o,whiteSpace:"nowrap"}};function oe(o,r){if(1&o&&(e.TgZ(0,"th",34),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("ngStyle",e.VKq(2,ie,0===t.priority?"68px":"100%")),e.xp6(1),e.hij(" ",t.title," ")}}function se(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td",35),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"nz-tag",12),e._uU(7),e.qZA()(),e.TgZ(8,"td")(9,"nz-tag",12),e._uU(10),e.qZA()(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"date"),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.qZA(),e.TgZ(24,"td"),e._uU(25),e.qZA(),e.TgZ(26,"td"),e._uU(27),e.qZA(),e.TgZ(28,"td"),e._uU(29),e.qZA(),e.TgZ(30,"td",36),e._UZ(31,"span",37),e.TgZ(32,"nz-dropdown-menu",null,38)(34,"ul",39)(35,"li",40),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.onViewDetailPresentation(c.identityDevice,c.id))}),e._uU(36," Thi\u1ebft l\u1eadp l\u1ecbch tr\xecnh chi\u1ebfu "),e.qZA(),e.TgZ(37,"li",40),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.moveFile(c))}),e._uU(38,"Di chuy\u1ec3n"),e.qZA(),e.TgZ(39,"li",40),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.renameDevice(c.id,c.name))}),e._uU(40," \u0110\u1ed5i t\xean "),e.qZA(),e.TgZ(41,"li",41),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.onConfirmDeleteDevice(c.id,c.name))}),e._uU(42," Xo\xe1 thi\u1ebft b\u1ecb "),e.qZA()()()()()}if(2&o){const t=r.$implicit,n=r.index,i=e.MAs(33),c=e.oxw(3);let s;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.hij(" ",t.name?t.name:"--"," "),e.xp6(2),e.Q6J("nzColor",null!=t&&t.available?"green":"red"),e.xp6(1),e.Oqu(t.available?"\u0110ang ho\u1ea1t \u0111\u1ed9ng":"M\u1ea5t k\u1ebft n\u1ed1i"),e.xp6(2),e.Q6J("nzColor",t.isPresenting?"green":"red"),e.xp6(1),e.Oqu(null!=t&&t.isPresenting?"\u0110ang tr\xecnh chi\u1ebfu":"Kh\xf4ng tr\xecnh chi\u1ebfu"),e.xp6(2),e.Oqu(t.isPresenting?t.isPresenting:"--"),e.xp6(2),e.hij(" ",t.lastDisconnectedTime?e.xi3(15,16,t.lastDisconnectedTime,"HH:mm dd/MM/yyyy"):"--"," "),e.xp6(3),e.hij(" ",null!==(s=c.calculateTimeAgo(t.timeOffAgo))&&void 0!==s?s:"--"," "),e.xp6(2),e.hij(" ",t.location?t.location:"--"," "),e.xp6(2),e.Oqu(t.model?t.model:"--"),e.xp6(2),e.Oqu(t.serialNumber?t.serialNumber:"--"),e.xp6(2),e.Oqu(t.manufacturer?t.manufacturer:"--"),e.xp6(2),e.Oqu(t.appVersion?t.appVersion:"--"),e.xp6(2),e.Oqu(t.osVersion?t.osVersion:"--"),e.xp6(2),e.Q6J("nzDropdownMenu",i)}}const ce=function(){return[]};function le(o,r){if(1&o&&(e.TgZ(0,"nz-table",30,31)(2,"thead")(3,"tr"),e.YNc(4,oe,2,4,"th",32),e.qZA()(),e.TgZ(5,"tbody"),e.YNc(6,se,43,19,"tr",33),e.qZA()()),2&o){const t=r.ngIf,n=e.oxw(2);e.Q6J("nzFrontPagination",!1)("nzShowPagination",!1)("nzData",t||e.DdM(5,ce)),e.xp6(4),e.Q6J("ngForOf",n.listOfColumn),e.xp6(2),e.Q6J("ngForOf",t)}}function re(o,r){if(1&o&&(e.TgZ(0,"div",28),e.YNc(1,le,7,6,"nz-table",29),e.ALo(2,"async"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.devices$))}}function ae(o,r){1&o&&(e.TgZ(0,"span",54),e.O4$(),e.TgZ(1,"svg",55),e._UZ(2,"circle",56),e.qZA()())}function de(o,r){1&o&&(e.TgZ(0,"span",54),e.O4$(),e.TgZ(1,"svg",55),e._UZ(2,"circle",57),e.qZA()())}function ue(o,r){if(1&o&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.qZA(),e.TgZ(5,"div"),e._uU(6),e.qZA(),e.TgZ(7,"div"),e._uU(8),e.qZA(),e.TgZ(9,"div"),e._uU(10),e.qZA(),e.TgZ(11,"div"),e._uU(12),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij("Model m\xe1y: ",t.model,""),e.xp6(2),e.hij("S\u1ed1 seri: ",t.serialNumber,""),e.xp6(2),e.hij("H\xe3ng s\u1ea3n xu\u1ea5t: ",t.manufacturer,""),e.xp6(2),e.hij("Phi\xean b\u1ea3n app: ",t.appVersion,""),e.xp6(2),e.hij("Phi\xean b\u1ea3n h\u1ec7 \u0111i\u1ec1u h\xe0nh: ",t.osVersion,""),e.xp6(2),e.hij("V\u1ecb tr\xed: ",t.location,"")}}const ge=function(o){return{"bg-active":o}};function pe(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",44),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.onViewDetailPresentation(c.identityDevice,c.id))}),e.TgZ(1,"div",45)(2,"label",46),e.NdJ("ngModelChange",function(i){const s=e.CHM(t).index,m=e.oxw(2);return e.KtG(m.checked[s]=i)})("ngModelChange",function(){const c=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.chooseDevice(c))}),e._uU(3),e.qZA()(),e.TgZ(4,"div",47),e.YNc(5,ae,3,0,"span",48),e.YNc(6,de,3,0,"span",48),e.TgZ(7,"span",49),e._uU(8),e.qZA()(),e.TgZ(9,"div",50)(10,"nz-tag",12),e._uU(11),e.qZA(),e.TgZ(12,"div",51),e.NdJ("click",function(i){return i.stopPropagation()}),e._UZ(13,"span",52),e.TgZ(14,"nz-dropdown-menu",null,38)(16,"ul",39)(17,"li",40),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.onViewDetailPresentation(c.identityDevice,c.id))}),e._uU(18," Thi\u1ebft l\u1eadp l\u1ecbch tr\xecnh chi\u1ebfu "),e.qZA(),e.TgZ(19,"li",40),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.moveFile(c))}),e._uU(20,"Di chuy\u1ec3n"),e.qZA(),e.TgZ(21,"li",40),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.renameDevice(c.id,c.name))}),e._uU(22," \u0110\u1ed5i t\xean "),e.qZA(),e.TgZ(23,"li",41),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.onConfirmDeleteDevice(c.id,c.name))}),e._uU(24," Xo\xe1 thi\u1ebft b\u1ecb "),e.qZA()()()()(),e.YNc(25,ue,13,6,"ng-template",null,53,e.W1O),e.qZA()}if(2&o){const t=r.$implicit,n=r.index,i=e.MAs(15),c=e.MAs(26),s=e.oxw(2);e.s9C("nzPopoverTitle",t.name),e.Q6J("nzPopoverContent",c)("ngClass",e.VKq(11,ge,s.checked[n])),e.xp6(2),e.Q6J("ngModel",s.checked[n]),e.xp6(1),e.Oqu(null==t?null:t.name),e.xp6(2),e.Q6J("ngIf",t.available),e.xp6(1),e.Q6J("ngIf",!t.available),e.xp6(2),e.hij(" ",s.calculateTimeAgo(t.timeOffAgo),""),e.xp6(2),e.Q6J("nzColor",t.isPresenting?"#5F7EEB":"#D9D9D9"),e.xp6(1),e.Oqu(t.isPresenting?"\u0110ang tr\xecnh chi\u1ebfu":"Kh\xf4ng tr\xecnh chi\u1ebfu"),e.xp6(2),e.Q6J("nzDropdownMenu",i)}}function he(o,r){if(1&o&&(e.TgZ(0,"div",42),e.YNc(1,pe,27,13,"div",43),e.ALo(2,"async"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.devices$))}}function _e(o,r){1&o&&(e.TgZ(0,"div",58),e._UZ(1,"nz-empty",59),e.qZA())}let ve=(()=>{class o{constructor(t,n,i,c,s,m,me){this.apiUserService=t,this.loadingService=n,this.modal=i,this.route=c,this.notification=s,this.datePipe=m,this.router=me,this.size="large",this.listOfColumn=J,this.totalDevicesCount=0,this.totalDevicesOnlineCount=0,this.totalDevicesOfflineCount=0,this.isModeViewTable=!1,this.devices$=null,this.currentPage$=new N.X(1),this.pageSize=15,this.allDevices=[],this.removedDevices=[],this.searchForm=new a.NI,this.Date=Date,this.Number=Number,this.checked=new Array(8).fill(!1),this.checkedId=[]}ngOnInit(){this.route.queryParams.pipe().subscribe(t=>{this.regionId=t.regionId,t.regionId&&(this.loadingService.showLoading(),this.loadDevices(),this.checkedId=[])}),setInterval(()=>{this.loadDevices()},6e4),this.searchForm.valueChanges.pipe((0,S.b)(500)).subscribe(t=>{this.loadingService.showLoading(),this.loadDevices(t)})}loadDevices(t){const n={regionId:this.regionId,page:0,size:15};t&&(n.name=t),this.apiUserService.getDeviceByRegionID(n).pipe((0,_.x)(()=>{this.loadingService.hideLoading()})).subscribe(i=>{this.allDevices=i?.data?.content??[],this.totalDevicesCount=this.allDevices.length,this.totalDevicesOnlineCount=this.allDevices.filter(c=>"ACTIVE"===c.status).length,this.totalDevicesOfflineCount=this.totalDevicesCount-this.totalDevicesOnlineCount,this.updateDisplayedDevices(),this.checked=new Array(this.allDevices.length).fill(!1)})}updateDisplayedDevices(){const t=(this.currentPage$.value-1)*this.pageSize;this.devices$=(0,B.of)(this.allDevices.slice(t,t+this.pageSize))}handlePageChange(t){this.currentPage$.next(t),this.updateDisplayedDevices()}onShowModeTable(){this.isModeViewTable=!this.isModeViewTable}reloadPage(){this.loadingService.showLoading(),this.currentPage$.next(1),this.loadDevices()}onConfirmDeleteDevice(t,n){this.modal.confirm({nzTitle:"B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n xo\xe1 thi\u1ebft b\u1ecb?",nzContent:`T\xean: ${n}`,nzCancelText:"Kh\xf4ng",nzOkText:"\u0110\u1ed3ng \xfd",nzOnOk:()=>{this.removeDeviceById(t),this.onDeleteDevice(t,n)}})}onDeleteDevice(t,n){this.modal.success({nzTitle:"Xo\xe1 thi\u1ebft b\u1ecb th\xe0nh c\xf4ng !!!",nzContent:`T\xean: ${n}`,nzCancelText:"Kh\xf4i ph\u1ee5c",nzOkText:"\u0110\xf3ng",nzOnOk:()=>this.deleteDevice(t),nzOnCancel:()=>{this.addDeviceBack(t),this.notification.success("Th\xf4ng b\xe1o","Kh\xf4i ph\u1ee5c th\xe0nh c\xf4ng!!!",{nzDuration:2e3})}})}deleteDevice(t){this.loadingService.showLoading(),this.apiUserService.deleteDevice(t).pipe((0,P.b)(n=>{!0===n.result.ok&&this.notification.success("Th\xf4ng b\xe1o","Xo\xe1 th\xe0nh c\xf4ng!!!",{nzDuration:2e3})}),(0,A.K)(n=>(this.loadingService.hideLoading(),(0,y._)(n?.error?.result?.message))),(0,_.x)(()=>{this.loadDevices(),this.loadingService.hideLoading()})).subscribe()}removeDeviceById(t){const n=this.allDevices.find(i=>i.id===t);n&&(this.removedDevices.push(n),this.allDevices=this.allDevices.filter(i=>i.id!==t),this.totalDevicesCount--,"ACTIVE"===n.status?this.totalDevicesOnlineCount--:this.totalDevicesOfflineCount--,this.updateDisplayedDevices())}addDeviceBack(t){const n=this.removedDevices.find(i=>i.id===t);n&&(this.allDevices.push(n),this.removedDevices=this.removedDevices.filter(i=>i.id!==t),this.totalDevicesCount++,"ACTIVE"===n.status?this.totalDevicesOnlineCount++:this.totalDevicesOfflineCount++,this.updateDisplayedDevices())}renameDevice(t,n){const i=this.modal.confirm({nzTitle:`\u0110\u1ed5i t\xean thi\u1ebft b\u1ecb ${n}`,nzContent:q,nzCancelText:"\u0110\xf3ng",nzOkText:"OK",nzOnOk:()=>{this.loadingService.showLoading();const c={deviceId:t,name:i.getContentComponent().getData()};this.apiUserService.renameDevice(c).pipe((0,P.b)(s=>{this.notification.success("Th\xf4ng b\xe1o",0==s?.result?.ok?s?.result?.message??"\u0110\xe3 c\xf3 l\u1ed7i, vui l\xf2ng th\u1eed l\u1ea1i":"\u0110\u1ed5i t\xean thi\u1ebft b\u1ecb th\xe0nh c\xf4ng",{nzDuration:2e3})}),(0,A.K)(s=>(this.notification.success("Th\xf4ng b\xe1o",s?.result?.message??"\u0110\xe3 c\xf3 l\u1ed7i, vui l\xf2ng th\u1eed l\u1ea1i",{nzDuration:2e3}),(0,y._)(s?.error?.result?.message))),(0,_.x)(()=>{this.loadDevices()})).subscribe()}})}calculateTimeAgo(t){const i=Date.now()-Number(t);return this.datePipe.transform(i,"HH:mm dd/MM/yyyy")}moveFile(t){const n=this.modal.create({nzTitle:"Di chuy\u1ec3n thi\u1ebft b\u1ecb",nzContent:V,nzCancelText:"\u0110\xf3ng",nzOkText:"OK",nzWidth:500,nzOnOk:()=>{const i=n.getContentComponent().getData();let c=[];this.isModeViewTable&&(c=[{deviceId:t.id,oldRegionId:this.regionId,newRegionId:i}]),this.apiUserService.moveDevice(c).subscribe({next:s=>{s.result.ok?(this.notification.success("Th\xf4ng b\xe1o","Di chuy\u1ec3n thi\u1ebft b\u1ecb th\xe0nh c\xf4ng!!!",{nzDuration:2e3}),this.loadingService.showLoading(),this.loadDevices()):this.notification.error("Th\xf4ng b\xe1o",s.result.message,{nzDuration:2e3})}})}})}chooseDevice(t){this.isChecked(t)?this.uncheckItem(t):this.checkItem(t)}isChecked(t){return this.checkedId&&this.checkedId.includes(t.id)}checkItem(t){this.checkedId?this.checkedId.push(t.id):this.checkedId=[t.id]}uncheckItem(t){this.checkedId&&(this.checkedId=this.checkedId.filter(n=>n!==t.id))}resetCheck(){this.checkedId=[],this.checked=new Array(this.allDevices.length).fill(!1)}checkAll(){this.checked=new Array(this.allDevices.length).fill(!0),this.checkedId=this.allDevices.map(t=>t.id)}onViewDetailPresentation(t,n){this.router.navigate(["adv/presentation-detail"],{queryParams:{regionId:this.regionId,deviceId:t,detailId:n}})}addRegion(){const t=this.modal.create({nzTitle:"T\u1ea1o khu v\u1ef1c",nzContent:R,nzCancelText:"\u0110\xf3ng",nzOkText:"OK",nzOnOk:()=>{const n=t.getContentComponent().getRegionName(),i=t.getContentComponent().getRegionPositionSave();if(console.log({name:n,id:i}),!n||""===n)return void this.notification.error("Th\xf4ng b\xe1o","T\xean khu v\u1ef1c kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng",{nzDuration:2e3});const c={name:n,description:n,parentId:i};this.loadingService.showLoading(),this.apiUserService.createRegion(c).subscribe(s=>{s.result.ok&&this.apiUserService.sendRegion(!0)})}})}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(v._),e.Y36(K.b),e.Y36(z.Sf),e.Y36(E.gz),e.Y36(M.zb),e.Y36(d.uU),e.Y36(E.F0))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["adv-list-device"]],standalone:!0,features:[e._Bn([M.zb,d.uU]),e.jDz],decls:37,vars:18,consts:[[1,"user-list-wrapper"],[1,"filter-header"],[1,"search-box"],["nzSize","large",3,"nzSuffix"],["type","text","nz-input","","placeholder","T\xecm ki\u1ebfm theo t\xean, series thi\u1ebft b\u1ecb",3,"formControl"],["suffixIconSearch",""],[1,"btn-action-group"],["nz-button","","nzType","default","nzSize","large",1,"create-team",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],[4,"ngIf"],["nz-icon","","nzType","reload","nzTheme","outline"],[1,"device-info"],[3,"nzColor"],[1,"content-wrapper"],["class","table-body","style","overflow: auto",4,"ngIf"],["class","grid-body",4,"ngIf","ngIfElse"],["noDataDevice",""],[1,"pagination-footer"],[3,"nzPageIndex","nzTotal","nzPageSize","nzPageIndexChange"],["nz-icon","","nzType","search"],["nz-icon","","nzType","table","nzTheme","outline"],["nz-icon","","nzType","appstore","nzTheme","outline"],["nz-button","","nzType","default","nzSize","small",1,"mx-2",3,"disabled","click"],["nz-button","","nzType","default","nzSize","small",3,"disabled","click"],[2,"display","inline-flex","margin-left","5px","cursor","pointer",3,"click"],[1,"anticon","anticon-close"],["fill-rule","evenodd","viewBox","64 64 896 896","focusable","false","fill","currentColor","width","1em","height","1em","data-icon","close","aria-hidden","true",1,"",2,"padding-bottom","1px"],["d","M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"],[1,"table-body",2,"overflow","auto"],[3,"nzFrontPagination","nzShowPagination","nzData",4,"ngIf"],[3,"nzFrontPagination","nzShowPagination","nzData"],["filterTable",""],[3,"ngStyle",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"ngStyle"],["nz",""],[2,"cursor","pointer"],["nz-icon","","nzType","more","nzTheme","outline","nz-dropdown","",3,"nzDropdownMenu"],["moreAction","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click"],["nz-menu-item","",2,"color","#a00705",3,"click"],[1,"grid-body"],["class","grid-item","nz-popover","","nzPopoverTrigger","hover",3,"nzPopoverTitle","nzPopoverContent","ngClass","click",4,"ngFor","ngForOf"],["nz-popover","","nzPopoverTrigger","hover",1,"grid-item",3,"nzPopoverTitle","nzPopoverContent","ngClass","click"],[1,"device-name"],["nz-checkbox","",3,"ngModel","ngModelChange"],[1,"device-status"],["nz-icon","",4,"ngIf"],[1,"time-desc"],[1,"device-play-desc"],[1,"icon-more-action",3,"click"],["nz-icon","","nzType","more","nzTheme","outline","nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu"],["contentTemplate",""],["nz-icon",""],["width","16","height","16","viewBox","0 0 16 16","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","8","cy","8","r","8","fill","#52C41A"],["cx","8","cy","8","r","8","fill","#F5222D"],[1,"empty-data-device"],["nzNotFoundImage","simple"]],template:function(n,i){if(1&n&&(e._UZ(0,"hub-loading"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"nz-input-group",3),e._UZ(5,"input",4),e.qZA(),e.YNc(6,X,1,0,"ng-template",null,5,e.W1O),e.qZA(),e.TgZ(8,"div",6)(9,"button",7),e.NdJ("click",function(){return i.addRegion()}),e._UZ(10,"span",8),e.TgZ(11,"span"),e._uU(12,"Th\xeam khu v\u1ef1c"),e.qZA()(),e.TgZ(13,"button",7),e.NdJ("click",function(){return i.onShowModeTable()}),e.YNc(14,W,4,0,"ng-container",9),e.YNc(15,ee,4,0,"ng-container",9),e.qZA(),e.TgZ(16,"button",7),e.NdJ("click",function(){return i.reloadPage()}),e._UZ(17,"span",10),e.TgZ(18,"span"),e._uU(19,"C\u1eadp nh\u1eadt danh s\xe1ch"),e.qZA()()()(),e.TgZ(20,"div",11)(21,"div")(22,"nz-tag"),e._uU(23),e.qZA(),e.TgZ(24,"nz-tag",12),e._uU(25),e.qZA(),e.TgZ(26,"nz-tag",12),e._uU(27),e.qZA()(),e.YNc(28,ne,8,3,"div",9),e.qZA(),e.TgZ(29,"div",13),e.YNc(30,re,3,3,"div",14),e.YNc(31,he,3,3,"div",15),e.YNc(32,_e,2,0,"ng-template",null,16,e.W1O),e.qZA(),e.TgZ(34,"div",17)(35,"nz-pagination",18),e.NdJ("nzPageIndexChange",function(s){return i.handlePageChange(s)}),e.ALo(36,"async"),e.qZA()()()),2&n){const c=e.MAs(7),s=e.MAs(33);e.xp6(4),e.Q6J("nzSuffix",c),e.xp6(1),e.Q6J("formControl",i.searchForm),e.xp6(9),e.Q6J("ngIf",!i.isModeViewTable),e.xp6(1),e.Q6J("ngIf",i.isModeViewTable),e.xp6(8),e.hij("T\u1ed5ng: ",i.totalDevicesCount,""),e.xp6(1),e.Q6J("nzColor","green"),e.xp6(1),e.hij("\u0110ang ho\u1ea1t \u0111\u1ed9ng: ",i.totalDevicesOnlineCount,""),e.xp6(1),e.Q6J("nzColor","red"),e.xp6(1),e.hij("M\u1ea5t k\u1ebft n\u1ed1i: ",i.totalDevicesOfflineCount,""),e.xp6(1),e.Q6J("ngIf",!i.isModeViewTable),e.xp6(2),e.Q6J("ngIf",i.isModeViewTable),e.xp6(1),e.Q6J("ngIf",!i.isModeViewTable&&i.allDevices.length>0)("ngIfElse",s),e.xp6(4),e.Q6J("nzPageIndex",e.lcZ(36,16,i.currentPage$))("nzTotal",i.totalDevicesCount)("nzPageSize",i.pageSize)}},dependencies:[d.ez,d.mk,d.sg,d.O5,d.PC,d.Ov,d.uU,a.u5,a.Fj,a.JJ,a.On,C.sL,C.ix,Y.w,H.dQ,T.PV,T.Ls,u.o7,u.Zp,u.gB,u.ke,h.b1,w.wO,w.r9,h.cm,h.RR,F.cq,g.LV,k.vh,z.Qp,I.U5,a.UX,a.oH,x.Wr,x.Ie,D.Xo,D.p9,U.U,G.N,O.uK,O.dE,p.HQ,p.N8,p.Uo,p._C,p.Om,p.p0,p.$Z,Z.X,Z.j,L.Hb,b.$6,b.lU],styles:["[_nghost-%COMP%]{display:block;height:100%}[_nghost-%COMP%]   .user-list-wrapper[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column}[_nghost-%COMP%]   .user-list-wrapper[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .user-list-wrapper[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{min-width:432px}[_nghost-%COMP%]   .user-list-wrapper[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .btn-action-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:16px;align-items:center}[_nghost-%COMP%]   .user-list-wrapper[_ngcontent-%COMP%]   .device-info[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:16px;display:flex;justify-content:space-between}[_nghost-%COMP%]   .user-list-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{flex:1;overflow:hidden}[_nghost-%COMP%]   .user-list-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]{height:100%;background:white}[_nghost-%COMP%]   .user-list-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .grid-body[_ngcontent-%COMP%]{max-height:100%;overflow:auto;display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:16px 24px}[_nghost-%COMP%]   .user-list-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .grid-body[_ngcontent-%COMP%]   .grid-item[_ngcontent-%COMP%]{cursor:pointer;padding:16px;background:white;display:flex;flex-direction:column;gap:16px;border:1px solid rgba(0,0,0,.0588235294);border-radius:8px}[_nghost-%COMP%]   .user-list-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .grid-body[_ngcontent-%COMP%]   .grid-item[_ngcontent-%COMP%]   .device-name[_ngcontent-%COMP%]{font-size:16px;font-weight:400;line-height:24px;text-align:left}[_nghost-%COMP%]   .user-list-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .grid-body[_ngcontent-%COMP%]   .grid-item[_ngcontent-%COMP%]   .device-status[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:10px}[_nghost-%COMP%]   .user-list-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .grid-body[_ngcontent-%COMP%]   .grid-item[_ngcontent-%COMP%]   .device-status[_ngcontent-%COMP%]   .time-desc[_ngcontent-%COMP%]{font-size:14px;font-weight:400;line-height:22px;text-align:left}[_nghost-%COMP%]   .user-list-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .grid-body[_ngcontent-%COMP%]   .grid-item[_ngcontent-%COMP%]   .device-play-desc[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .user-list-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .grid-body[_ngcontent-%COMP%]   .grid-item[_ngcontent-%COMP%]:hover{background:#e6f7ff}[_nghost-%COMP%]   .user-list-wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .empty-data-device[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;padding:50px;background:white}[_nghost-%COMP%]   .user-list-wrapper[_ngcontent-%COMP%]   .pagination-footer[_ngcontent-%COMP%]{margin-top:24px}[_nghost-%COMP%]   .create-team[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .bg-active[_ngcontent-%COMP%]{background:#bae7ff!important}[_nghost-%COMP%]     .ant-table-cell{white-space:nowrap}"]})}return o})()}}]);