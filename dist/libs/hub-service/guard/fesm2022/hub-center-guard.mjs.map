{"version":3,"file":"hub-center-guard.mjs","sources":["../../../../../libs/hub-service/guard/src/lib/auth.guard.ts","../../../../../libs/hub-service/guard/src/hub-center-guard.ts"],"sourcesContent":["import { inject } from '@angular/core';\nimport { CanActivateFn, Router } from '@angular/router';\nimport {\n  LocalStorageService,\n  LocalStoreEnum,\n} from '@hub-center/hub-service/storage';\n\nexport const authGuard: CanActivateFn = (route, state) => {\n  const router = inject(Router);\n  const localStorageService = inject(LocalStorageService);\n  const accessToken = localStorageService.getItem(LocalStoreEnum.ACCESS_TOKEN);\n  const currentUser = JSON.parse(\n    localStorageService.getItem(LocalStoreEnum.CUSTOMER_KEY)\n  );\n\n  if (currentUser && accessToken) {\n    return true;\n  }\n\n  localStorageService.removeItem(LocalStoreEnum.ACCESS_TOKEN);\n  localStorageService.removeItem(LocalStoreEnum.CUSTOMER_KEY);\n  router.navigate(['/login'], {\n    queryParams: { returnUrl: state.url },\n  });\n\n  return false;\n};\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;;MAOa,SAAS,GAAkB,CAAC,KAAK,EAAE,KAAK,KAAI;AACvD,IAAA,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;AAC9B,IAAA,MAAM,mBAAmB,GAAG,MAAM,CAAC,mBAAmB,CAAC,CAAC;IACxD,MAAM,WAAW,GAAG,mBAAmB,CAAC,OAAO,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;AAC7E,IAAA,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAC5B,mBAAmB,CAAC,OAAO,CAAC,cAAc,CAAC,YAAY,CAAC,CACzD,CAAC;IAEF,IAAI,WAAW,IAAI,WAAW,EAAE;AAC9B,QAAA,OAAO,IAAI,CAAC;AACb,KAAA;AAED,IAAA,mBAAmB,CAAC,UAAU,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;AAC5D,IAAA,mBAAmB,CAAC,UAAU,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;AAC5D,IAAA,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,EAAE;AAC1B,QAAA,WAAW,EAAE,EAAE,SAAS,EAAE,KAAK,CAAC,GAAG,EAAE;AACtC,KAAA,CAAC,CAAC;AAEH,IAAA,OAAO,KAAK,CAAC;AACf;;AC1BA;;AAEG;;;;"}