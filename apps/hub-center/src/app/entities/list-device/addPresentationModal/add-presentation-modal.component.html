<div class="add-presentation-modal">
  <div class="time-box">
    <div class="options">
      <div
        style="
          display: flex;
          flex-direction: row;
          align-items: center;
          gap: 8px;
        "
      >
        <span style="font-weight: 700">Thời gian chạy</span>
        <span>(Vui lòng chọn trong khoảng 90 ngày gần nhất)</span>
      </div>
      <nz-radio-group
        style="
          flex: 1;
          display: flex;
          flex-direction: row;
          justify-content: center;
        "
        [(ngModel)]="radioValue"
      >
        <label nz-radio nzValue="day">Theo ngày</label>
        <label nz-radio nzValue="custom">Tuỳ chỉnh</label>
        <!-- <label
          *ngIf="listOfSelectedSchedule.length < 2"
          nz-radio
          nzValue="fixed"
          >Cố định</label
        > -->
      </nz-radio-group>
    </div>
    <div class="value-time">
      <nz-date-picker
        [nzDisabledDate]="disabledDate"
        *ngIf="radioValue === 'day'"
        [(ngModel)]="date"
        (ngModelChange)="onChange($event)"
      ></nz-date-picker>
      <tui-calendar
        *ngIf="radioValue === 'custom'"
        [min]="minDate"
        [max]="maxDate"
        [value]="selectedMultiDate"
        (dayClick)="onDayClick($event)"
      ></tui-calendar>
    </div>
  </div>
  <div class="search-box">
    <div
      style="
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 8px;
        margin-top: 16px;
        margin-bottom: 16px;
      "
    >
      <span style="font-weight: 700">Chọn lịch trình chiếu</span>
    </div>
    <nz-select
      [nzMaxMultipleCount]="radioValue !== 'fixed' ? 100 : 1"
      nzMode="multiple"
      nzPlaceHolder="Chọn lịch sẽ trình chiếu"
      [(ngModel)]="listOfSelectedSchedule"
      [nzCustomTemplate]="customTemplate"
      (ngModelChange)="changSelectedSchedule($event)"
    >
      <nz-option
        *ngFor="let item of listSchedule"
        [nzLabel]="item.name"
        [nzValue]="item.id"
      >
        <div>{{ item.name }}</div>
      </nz-option>
    </nz-select>
    <ng-template #customTemplate let-selected>
      <span
        (click)="
          onViewDetailPresentation(selected.nzValue, selected.nzLabel, $event)
        "
        nz-tooltip
        nzTooltipTitle="Click vào để xem chi tiết"
        >{{ selected.nzLabel }}</span
      >
    </ng-template>
  </div>

  <div class="footer">
    <button nz-button (click)="closeModal()" nzType="default">Huỷ bỏ</button>
    <button
      nz-button
      nzType="primary"
      [disabled]="listOfSelectedSchedule.length === 0 || !radioValue"
      (click)="addPresentation()"
    >
      Thêm lịch trình chiếu
    </button>
  </div>
  <div *ngIf="isLoading" class="loading">
    <nz-spin nzSimple></nz-spin>
  </div>
</div>
